{"id":"asVN","dependencies":[{"name":"/Users/ojack/PROJECTS/flujos/package.json","includedInParent":true,"mtime":1618339867251},{"name":"./lib/mediasoup-viewer.js","loc":{"line":1,"column":23},"parent":"/Users/ojack/PROJECTS/flujos/init-media-sources.js","resolved":"/Users/ojack/PROJECTS/flujos/lib/mediasoup-viewer.js"},{"name":"nanohtml","loc":{"line":3,"column":21},"parent":"/Users/ojack/PROJECTS/flujos/init-media-sources.js","resolved":"/Users/ojack/PROJECTS/flujos/node_modules/nanohtml/lib/browser.js"}],"generated":{"js":"const e=require(\"./lib/mediasoup-viewer.js\"),t=require(\"nanohtml\");function i({width:e=300,height:i=200}={},o=(()=>{})){const s=t`<video style=\"width:${e};height:${i};clip-path:circle(${i/2}px at ${e/2}px ${i/2}px)\"></video>`;return s.autoplay=!0,s.addEventListener(\"loadeddata\",o),s}module.exports=(()=>{let o=!1;const s=\"wss://mediasoup.tentacles.live:8000\";if(!o){const d=i({},()=>{setTimeout(()=>{d.play()},600)}),l=i({},()=>{d.play()}),a=t`<div class=\"absolute right-0 top-0 fr\">${d}${l}</div>`;document.body.appendChild(a);new e({videoEl:d,server:s,streamKey:\"flujos\"}),new e({videoEl:l,server:s,streamKey:\"flujos2\"});o=!0}});"},"sourceMaps":{"js":{"mappings":[{"source":"init-media-sources.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"init-media-sources.js","name":"Viewer","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"init-media-sources.js","name":"require","original":{"line":1,"column":15},"generated":{"line":1,"column":8}},{"source":"init-media-sources.js","original":{"line":1,"column":23},"generated":{"line":1,"column":16}},{"source":"init-media-sources.js","name":"html","original":{"line":3,"column":6},"generated":{"line":1,"column":45}},{"source":"init-media-sources.js","name":"require","original":{"line":3,"column":13},"generated":{"line":1,"column":47}},{"source":"init-media-sources.js","original":{"line":3,"column":21},"generated":{"line":1,"column":55}},{"source":"init-media-sources.js","original":{"line":51,"column":0},"generated":{"line":1,"column":67}},{"source":"init-media-sources.js","name":"createVideo","original":{"line":51,"column":9},"generated":{"line":1,"column":76}},{"source":"init-media-sources.js","original":{"line":51,"column":21},"generated":{"line":1,"column":79}},{"source":"init-media-sources.js","name":"width","original":{"line":51,"column":23},"generated":{"line":1,"column":85}},{"source":"init-media-sources.js","original":{"line":51,"column":29},"generated":{"line":1,"column":87}},{"source":"init-media-sources.js","original":{"line":51,"column":21},"generated":{"line":1,"column":91}},{"source":"init-media-sources.js","name":"height","original":{"line":51,"column":34},"generated":{"line":1,"column":98}},{"source":"init-media-sources.js","original":{"line":51,"column":41},"generated":{"line":1,"column":100}},{"source":"init-media-sources.js","original":{"line":51,"column":48},"generated":{"line":1,"column":105}},{"source":"init-media-sources.js","name":"onload","original":{"line":51,"column":52},"generated":{"line":1,"column":108}},{"source":"init-media-sources.js","original":{"line":51,"column":61},"generated":{"line":1,"column":110}},{"source":"init-media-sources.js","name":"vid","original":{"line":52,"column":8},"generated":{"line":1,"column":120}},{"source":"init-media-sources.js","name":"vid","original":{"line":52,"column":8},"generated":{"line":1,"column":126}},{"source":"init-media-sources.js","name":"html","original":{"line":52,"column":14},"generated":{"line":1,"column":128}},{"source":"init-media-sources.js","name":"width","original":{"line":52,"column":41},"generated":{"line":1,"column":152}},{"source":"init-media-sources.js","name":"height","original":{"line":52,"column":57},"generated":{"line":1,"column":164}},{"source":"init-media-sources.js","name":"height","original":{"line":52,"column":84},"generated":{"line":1,"column":186}},{"source":"init-media-sources.js","original":{"line":52,"column":91},"generated":{"line":1,"column":188}},{"source":"init-media-sources.js","name":"width","original":{"line":52,"column":101},"generated":{"line":1,"column":198}},{"source":"init-media-sources.js","original":{"line":52,"column":107},"generated":{"line":1,"column":200}},{"source":"init-media-sources.js","name":"height","original":{"line":52,"column":114},"generated":{"line":1,"column":207}},{"source":"init-media-sources.js","original":{"line":52,"column":121},"generated":{"line":1,"column":209}},{"source":"init-media-sources.js","name":"vid","original":{"line":56,"column":9},"generated":{"line":1,"column":226}},{"source":"init-media-sources.js","name":"vid","original":{"line":53,"column":2},"generated":{"line":1,"column":233}},{"source":"init-media-sources.js","name":"autoplay","original":{"line":53,"column":6},"generated":{"line":1,"column":235}},{"source":"init-media-sources.js","original":{"line":53,"column":17},"generated":{"line":1,"column":245}},{"source":"init-media-sources.js","name":"vid","original":{"line":55,"column":2},"generated":{"line":1,"column":247}},{"source":"init-media-sources.js","name":"addEventListener","original":{"line":55,"column":6},"generated":{"line":1,"column":249}},{"source":"init-media-sources.js","original":{"line":55,"column":23},"generated":{"line":1,"column":266}},{"source":"init-media-sources.js","name":"onload","original":{"line":55,"column":37},"generated":{"line":1,"column":279}},{"source":"init-media-sources.js","name":"vid","original":{"line":56,"column":9},"generated":{"line":1,"column":282}},{"source":"init-media-sources.js","name":"module","original":{"line":6,"column":0},"generated":{"line":1,"column":284}},{"source":"init-media-sources.js","name":"exports","original":{"line":6,"column":7},"generated":{"line":1,"column":291}},{"source":"init-media-sources.js","original":{"line":6,"column":17},"generated":{"line":1,"column":299}},{"source":"init-media-sources.js","name":"hasStarted","original":{"line":8,"column":6},"generated":{"line":1,"column":305}},{"source":"init-media-sources.js","name":"hasStarted","original":{"line":8,"column":6},"generated":{"line":1,"column":309}},{"source":"init-media-sources.js","original":{"line":8,"column":19},"generated":{"line":1,"column":312}},{"source":"init-media-sources.js","name":"server","original":{"line":21,"column":8},"generated":{"line":1,"column":314}},{"source":"init-media-sources.js","name":"server","original":{"line":21,"column":8},"generated":{"line":1,"column":320}},{"source":"init-media-sources.js","original":{"line":21,"column":17},"generated":{"line":1,"column":322}},{"source":"init-media-sources.js","original":{"line":23,"column":7},"generated":{"line":1,"column":360}},{"source":"init-media-sources.js","name":"hasStarted","original":{"line":23,"column":8},"generated":{"line":1,"column":364}},{"source":"init-media-sources.js","original":{"line":23,"column":20},"generated":{"line":1,"column":366}},{"source":"init-media-sources.js","name":"video","original":{"line":24,"column":12},"generated":{"line":1,"column":367}},{"source":"init-media-sources.js","name":"video","original":{"line":24,"column":12},"generated":{"line":1,"column":373}},{"source":"init-media-sources.js","name":"createVideo","original":{"line":24,"column":20},"generated":{"line":1,"column":375}},{"source":"init-media-sources.js","original":{"line":24,"column":32},"generated":{"line":1,"column":377}},{"source":"init-media-sources.js","original":{"line":24,"column":36},"generated":{"line":1,"column":380}},{"source":"init-media-sources.js","name":"setTimeout","original":{"line":25,"column":8},"generated":{"line":1,"column":385}},{"source":"init-media-sources.js","original":{"line":25,"column":19},"generated":{"line":1,"column":396}},{"source":"init-media-sources.js","name":"video","original":{"line":28,"column":10},"generated":{"line":1,"column":401}},{"source":"init-media-sources.js","name":"play","original":{"line":28,"column":16},"generated":{"line":1,"column":403}},{"source":"init-media-sources.js","original":{"line":29,"column":11},"generated":{"line":1,"column":411}},{"source":"init-media-sources.js","name":"video2","original":{"line":32,"column":12},"generated":{"line":1,"column":418}},{"source":"init-media-sources.js","name":"createVideo","original":{"line":32,"column":21},"generated":{"line":1,"column":420}},{"source":"init-media-sources.js","original":{"line":32,"column":33},"generated":{"line":1,"column":422}},{"source":"init-media-sources.js","original":{"line":32,"column":37},"generated":{"line":1,"column":425}},{"source":"init-media-sources.js","name":"video","original":{"line":32,"column":45},"generated":{"line":1,"column":430}},{"source":"init-media-sources.js","name":"play","original":{"line":32,"column":51},"generated":{"line":1,"column":432}},{"source":"init-media-sources.js","name":"videoHolder","original":{"line":35,"column":12},"generated":{"line":1,"column":441}},{"source":"init-media-sources.js","name":"html","original":{"line":35,"column":26},"generated":{"line":1,"column":443}},{"source":"init-media-sources.js","name":"video","original":{"line":35,"column":72},"generated":{"line":1,"column":486}},{"source":"init-media-sources.js","name":"video2","original":{"line":35,"column":80},"generated":{"line":1,"column":490}},{"source":"init-media-sources.js","name":"document","original":{"line":36,"column":6},"generated":{"line":1,"column":500}},{"source":"init-media-sources.js","name":"body","original":{"line":36,"column":15},"generated":{"line":1,"column":509}},{"source":"init-media-sources.js","name":"appendChild","original":{"line":36,"column":20},"generated":{"line":1,"column":514}},{"source":"init-media-sources.js","name":"videoHolder","original":{"line":36,"column":32},"generated":{"line":1,"column":526}},{"source":"init-media-sources.js","original":{"line":40,"column":22},"generated":{"line":1,"column":529}},{"source":"init-media-sources.js","name":"Viewer","original":{"line":40,"column":26},"generated":{"line":1,"column":533}},{"source":"init-media-sources.js","original":{"line":40,"column":33},"generated":{"line":1,"column":535}},{"source":"init-media-sources.js","name":"videoEl","original":{"line":40,"column":35},"generated":{"line":1,"column":536}},{"source":"init-media-sources.js","name":"video","original":{"line":40,"column":44},"generated":{"line":1,"column":544}},{"source":"init-media-sources.js","name":"server","original":{"line":40,"column":51},"generated":{"line":1,"column":546}},{"source":"init-media-sources.js","name":"server","original":{"line":40,"column":60},"generated":{"line":1,"column":553}},{"source":"init-media-sources.js","name":"streamKey","original":{"line":40,"column":68},"generated":{"line":1,"column":555}},{"source":"init-media-sources.js","original":{"line":40,"column":79},"generated":{"line":1,"column":565}},{"source":"init-media-sources.js","original":{"line":45,"column":22},"generated":{"line":1,"column":576}},{"source":"init-media-sources.js","name":"Viewer","original":{"line":45,"column":26},"generated":{"line":1,"column":580}},{"source":"init-media-sources.js","original":{"line":45,"column":33},"generated":{"line":1,"column":582}},{"source":"init-media-sources.js","name":"videoEl","original":{"line":45,"column":35},"generated":{"line":1,"column":583}},{"source":"init-media-sources.js","name":"video2","original":{"line":45,"column":44},"generated":{"line":1,"column":591}},{"source":"init-media-sources.js","name":"server","original":{"line":45,"column":52},"generated":{"line":1,"column":593}},{"source":"init-media-sources.js","name":"server","original":{"line":45,"column":61},"generated":{"line":1,"column":600}},{"source":"init-media-sources.js","name":"streamKey","original":{"line":45,"column":69},"generated":{"line":1,"column":602}},{"source":"init-media-sources.js","original":{"line":45,"column":80},"generated":{"line":1,"column":612}},{"source":"init-media-sources.js","name":"hasStarted","original":{"line":46,"column":6},"generated":{"line":1,"column":624}},{"source":"init-media-sources.js","original":{"line":46,"column":19},"generated":{"line":1,"column":627}}],"sources":{"init-media-sources.js":"const Viewer = require('./lib/mediasoup-viewer.js')\n// const hydraStartup = require('./hydra-startup')\nconst html = require('nanohtml')\n\n\nmodule.exports = () => {\n\n  let hasStarted = false\n//  document.body.innerHTML = 'this an example viewer for the media soup broadcaster. click to start!'\n\n  //const server = `wss://livelab.app:3499`\n  // const server = `wss://192.168.178.37:8000`\n  //const server = `wss://localhost:8000/${window.location.search}`\n\n  //const server = `wss://${window.location.hostname}:8000/${window.location.search}`\n\n  // const server = `wss://${window.location.hostname}:8000/${window.location.search}`\n\n\n\n  const server = \"wss://mediasoup.tentacles.live:8000\"   // /?stream=flujos\"\n  //window.onclick = () => {\n    if(!hasStarted) {\n      const video = createVideo({}, () => {\n        setTimeout(() => {\n        //  s0.init({ src: video })\n          // osc(3, 0.2, 1.2).diff(s0).out()\n          video.play()\n        }, 600)\n      })\n\n      const video2 = createVideo({}, () => { video.play() })\n      // const audioEl = html`<audio></audio>`\n      // audioEl.autoplay = true\n      const videoHolder = html`<div class=\"absolute right-0 top-0 fr\">${video}${video2}</div>`\n      document.body.appendChild(videoHolder)\n\n\n      // turn the video element into a viewer for server location `wss://localhost:8000`\n      const viewer1 = new Viewer({ videoEl: video, server:  server, streamKey: \"flujos\"})\n\n      // const audio = new Viewer({ videoEl: audioEl, server:  server, streamKey: \"flujos-audio\"})\n\n      // // turn the video element into a viewer for server location `wss://localhost:8000`\n      const viewer2 = new Viewer({ videoEl: video2, server:  server, streamKey: \"flujos2\"})\n      hasStarted = true\n    }\n  //}\n}\n\nfunction createVideo({ width=300, height=200} = {}, onload = () => {}) {\n  const vid = html`<video style=\"width:${width};height:${height};clip-path:circle(${height/2}px at ${width/2}px ${height/2}px)\"></video>`\n  vid.autoplay = true\n  // vid.muted = true\n  vid.addEventListener('loadeddata', onload)\n  return vid\n}\n"},"lineCount":null}},"error":null,"hash":"c3b904f3e77d8411b09046afbd389daa","cacheData":{"env":{}}}